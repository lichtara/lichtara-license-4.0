name: QA - License Integrity Check

on:
push:
branches: [ "main" ]
pull_request:

jobs:
verify-structure:
runs-on: ubuntu-latest
steps:
- name: Checkout
uses: actions/checkout@v4

```
  - name: Ensure master.md exists
    run: |
      test -f pdf/master.md || (echo "master.md ausente" && exit 1)

  - name: Verify required sections
    run: |
      for SEC in I II III IV V VI VII VIII IX; do
        grep -q "SEÇÃO $SEC" -n pdf/master.md || (echo "Falta SEÇÃO $SEC" && exit 1)
      done
      echo "Todas as seções presentes."

  - name: Verify required annexes
    run: |
      for ANN in A B C D E; do
        test -f annexes/anexo-${ANN}* || (echo "Falta Anexo ${ANN}" && exit 1)
      done
      echo "Todos os anexos encontrados."

  - name: Check DOI correctness
    run: |
      grep -q "10.5281/zenodo.17844329" -n pdf/master.md \
      || (echo "DOI incorreto ou ausente" && exit 1)

  - name: Validate NOTICE presence
    run: |
      test -f NOTICE || (echo "NOTICE ausente" && exit 1)
      grep -q "LICHTARA" NOTICE || (echo "NOTICE inválido" && exit 1)

  - name: Validate metadata
    run: |
      test -f version-info.json || (echo "version-info.json ausente" && exit 1)
      echo "Metadata validado."

  - name: Success message
    run: echo "QA concluído. Estrutura íntegra e consistente."
```
