license/
    .github/
        workflows/
            release-sync.yml   â† aqui
name: GitHub Release Sync (PRO)

on:
push:
tags:
- "v*"

jobs:
release:
name: Create GitHub Release (PRO)
runs-on: ubuntu-latest

```
steps:
  - name: Checkout repository
    uses: actions/checkout@v4
    with:
      fetch-depth: 0  # necessÃ¡rio para gerar notas de versÃ£o

  - name: Extract version from tag
    id: version
    run: |
      VER="${GITHUB_REF#refs/tags/}"
      echo "version=$VER" >> $GITHUB_OUTPUT

  - name: Build PDF (reuse pipeline artefacts)
    working-directory: ./lichtara-license-v4/pdf
    run: |
      chmod +x build.sh
      ./build.sh

  - name: Compute SHA256
    id: sha
    run: |
      HASH=$(sha256sum lichtara-license-v4/pdf/LICENSE-v4.0.pdf | awk '{print $1}')
      echo "sha256=$HASH" >> $GITHUB_OUTPUT

  - name: Generate release notes
    id: notes
    run: |
      PREV_TAG=$(git describe --tags --abbrev=0 HEAD^ 2>/dev/null || echo "none")
      if [ "$PREV_TAG" = "none" ]; then
        LOG=$(git log --pretty=format:"* %s")
      else
        LOG=$(git log $PREV_TAG..HEAD --pretty=format:"* %s")
      fi

      echo "notes<<EOF" >> $GITHUB_OUTPUT
      echo "## ðŸ“˜ Lichtara License v${{ steps.version.outputs.version }}" >> $GITHUB_OUTPUT
      echo "" >> $GITHUB_OUTPUT
      echo "**DOI oficial:** https://doi.org/10.5281/zenodo.17844329" >> $GITHUB_OUTPUT
      echo "" >> $GITHUB_OUTPUT
      echo "**PDF SHA256:** \`${{ steps.sha.outputs.sha256 }}\`" >> $GITHUB_OUTPUT
      echo "" >> $GITHUB_OUTPUT
      echo "### ðŸ”„ MudanÃ§as desde a Ãºltima versÃ£o" >> $GITHUB_OUTPUT
      echo "$LOG" >> $GITHUB_OUTPUT
      echo "" >> $GITHUB_OUTPUT
      echo "### ðŸ”— Zenodo (versÃ£o)" >> $GITHUB_OUTPUT
      echo "> A versÃ£o Zenodo correspondente serÃ¡ anexada automaticamente pelo workflow zenodo-publish." >> $GITHUB_OUTPUT
      echo "" >> $GITHUB_OUTPUT
      echo "EOF" >> $GITHUB_OUTPUT

  - name: Create GitHub Release
    uses: softprops/action-gh-release@v2
    with:
      name: "Lichtara License v${{ steps.version.outputs.version }}"
      body: ${{ steps.notes.outputs.notes }}
      tag_name: ${{ steps.version.outputs.version }}
      files: |
        lichtara-license-v4/pdf/LICENSE-v4.0.pdf
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```
